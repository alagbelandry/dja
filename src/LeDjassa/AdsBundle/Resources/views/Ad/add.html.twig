{% block javascripts %}
	<script type="text/javascript" src="{{ asset('bundles/ledjassaads/js/jquery-1.8.1.min.js')}}"></script>
	<script type="text/javascript">
		
		$(document).ready(function() {

			var idArea = $("select#ad_city_area option:selected").val();
			if (!idArea) {
				hideCityAndQuarterField(idArea);
			} else {
				fillCityField(idArea);	
			};
			$("select#ad_city_area").change(function() {
				var idArea = $(this).val();
				if (!idArea) {
					hideCityAndQuarterField(idArea);
				} else {
					fillCityField(idArea);	
				}	
			});

		});
	
	/**
	 * [fillCityField Hydrate city field]
	 * @param  {[type]} $idArea [id area]
	 */
	function fillCityField(idArea) {
			// get list city
			$('select#ad_city_name, #ad_city_quarter').parent('div').show();
			$.ajax({
	        	type: 'POST',
	            dataType: 'json',
	            url:  '{{ path('city_from_area_get') }}',
	            data: 'areaId=' + idArea,
	            success: function(response)
	            {
	            	$('select#ad_city_name').find("option").remove();
	            	//$('select#city_name').find("option").remove();
	                $.each(response, function(i, item) {console.log(i);console.log(item);
	                $('#ad_city_name').append(new Option(item, i));
	             	});
	            },
	            error : function(response)
	            {

	            }
			});

	}

	/**
	 * [hideCityAndQuarterField Hide city and quarter field depending arear value]
	 * @param  {[type]} $idArea [id area]
	 */
	function hideCityAndQuarterField($idArea) {
		$('select#ad_city_name, #ad_city_quarter').parent('div').hide();	
	}
	</script>

{% endblock %}

<form action="{{ path('ad_add') }}" method="post" {{ form_enctype(form) }}>
	
	{{ form_errors(form) }}

	{{ form_row(form.city) }}
	{{ form_row(form.category) }}
	{{ form_row(form.user_type) }}
	{{ form_row(form.ad_type) }}

	{{ form_row(form.title) }}
	{{ form_row(form.description) }}
	{{ form_row(form.price) }}

	{{ form_rest(form) }}

	<input type="submit" />
</form>


